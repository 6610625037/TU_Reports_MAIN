{% extends 'base.html' %}
{% load static %}

{% block title %}‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Ticket #{{ ticket.id }} - TU Report{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto py-8 px-4">
  <div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-800">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Ticket #{{ ticket.id }}</h1>
    <p class="text-sm text-gray-600 mt-2">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Ticket ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ "‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£" ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
  </div>

  <form method="post" enctype="multipart/form-data" class="bg-white rounded-lg shadow p-6 space-y-6">
    {% csrf_token %}

    <!-- Title -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤ *</label>
      {{ form.title }}
    </div>

    <!-- Category -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà *</label>
      {{ form.category }}
    </div>

    <!-- Description -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î *</label>
      {{ form.description }}
    </div>

    <!-- Urgency -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô *</label>
      {{ form.urgency_level }}
    </div>

    <!-- Address -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà (‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£/‡∏´‡πâ‡∏≠‡∏á)</label>
      {{ form.address_description }}
    </div>

    <!-- Info about non-editable fields -->
    <div class="bg-blue-50 border border-blue-200 rounded p-4">
      <p class="text-sm text-blue-800">
        <strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç GPS location ‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Å‡πà‡∏≠‡∏ô‡∏ã‡πà‡∏≠‡∏°‡πÑ‡∏î‡πâ
      </p>
    </div>

    <!-- Current Location (Read-only) -->
    {% if ticket.location %}
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ)</label>
      <div class="bg-gray-50 p-3 rounded border border-gray-200 text-sm text-gray-600">
        Lat: {{ ticket.location.y|floatformat:6 }}, Lng: {{ ticket.location.x|floatformat:6 }}
      </div>
    </div>
    {% endif %}

    <!-- Submit -->
    <div class="flex justify-end space-x-3">
      <a href="{% url 'tickets:ticket_detail' ticket.id %}" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
      </a>
      <button type="submit" class="px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">
        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
      </button>
    </div>
  </form>
</div>
{% endblock %}
